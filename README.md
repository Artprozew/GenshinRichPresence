# GenshinRichPresence

[![pypresence](https://img.shields.io/badge/using-pypresence-00bb88.svg?style=for-the-badge&logo=discord&logoWidth=20)](https://github.com/qwertyquerty/pypresence)

## Overview

**Show your friends on Discord what you're up to in Genshin Impact!**

This is a Discord Rich Presence program for Genshin Impact that works by analyzing GIMI's log file in real-time to determine the current game status, updating your Discord game activity accordingly.

![image][example1]
![image][example2]

### Why do it this way?

You're right, accessing game information through GIMI's log file might not be the most elegant solution. Ideally, Genshin Impact would directly share your activity with Discord.
But this method is currently **one of the few ways** to get in-game information **without changing the game files** itself. Since it works as expected and doesn't alter the game, it's a practical solution.

### Is it safe?

Yes, this program is considered safe. It just reads a log file generated by GIMI, and **does not modify any game files**, so there's no risk of harming your game or your computer.

## Running the Executable

The pre-built executable is a convenient option for **users** who want to **avoid installing Python** or prefer a **single .exe file** application.
However, anti-virus might flag the .exe incorrectly as a "virus", you can check the [Anti-Virus Disclaimer](#anti-virus-disclaimer)

### Prerequisites

- Download the executable from [Releases][releases]
- [GIMI][GIMI] with mods
- You still need [Region.ini][Region.ini] on your game if you want it to display your region

### Instructions

- Extract the executable
- Run GIMI alongside Genshin Impact
- Run the executable
- You will be prompted to set your GIMI folder path
- Your activity must now be visible on your Discord profile, have fun!

## Running from Source Code

This method is suitable for users familiar with Python or encountering issues with the executable.

### Prerequisites

- [GIMI][GIMI] with mods
- [Python][Python]
- [Poetry][Poetry] is recommended

## Installation

- Download or clone the repository (using the following command `git clone https://github.com/Artprozew/GenshinRichPresence.git`)
- Go inside the project directory, right click on a blank space and click "open Command Prompt"
- Install dependencies using either pip (`python -m pip install -r requirements.txt`) or Poetry (`poetry install`)

## Instructions

- Run GIMI alongside Genshin Impact
- Open a command prompt on your project's root directory
- Run the `main.py` file inside the `src` folder with `python src/main.py`
- You will be prompted to set your GIMI folder path
- Your activity must now be visible on your Discord profile, have fun!

## Known issues

Although still under development, this method is not perfect and may have limitations. But keep in mind that it does work as expected **most of the time**.
Some of the issues described here may be fixed or worked around in the future. The problems observed are:

- When you first launch the program, it might not detect your current character/region until you switch your character or walk/teleport to another place.
- Occasionally, especially during teleports, the program might display an incorrect character. This issue can also be fixed when you switch characters.
- When there's more than one playable character on screen, the program can also struggle to detect your character (e.g.: Multiplayer or cutscenes).
- Some regions might not be displayed correctly.
- Due to the program relying on analyzing hashes, some information might be incorrect at times. These hashes may be wrong or outdated.
- Character mods for GIMI are currently required for the program to detect your characters.

### Anti-Virus Disclaimer

Some anti-virus software (Windows Defender or similar) might flag the executable as a potential threat due to overly cautious heuristics. This is a known issue called **"false positive"**, especially considering the program is built from **Python** code.

Python is a widely used and well-established programming language known for its security. However, anti-virus software might sometimes misinterpret the behavior of programs created with Python.

If you're confident the program is safe, you can add an exception for the program's executable file in your anti-virus software settings. This will prevent it from being flagged in the future.

We assure you that the program is entirely safe and does not contain any malicious code. If you encounter any issues running the program from the downloaded executable file, you can try [Running from Source Code](#running-from-source-code)

## Contributing

I had to push hard to get this pre-release out (gotta meet that deadline!), so the code might not be as polished as I'd like. There's still a lot to do, if you want to contribute, fork the repo, submit pull requests, or share any bug fixes or feature ideas you have, you're much welcome!

## Licensing

This project is licensed under MIT license; Refer to: [LICENSE][LICENSE]

### Credits

- Region data/hashes extracted from [golanah921's][golanah921] Region.ini
- Temporary app icon image (used as a placeholder icon) by [@KisekiHikari][KisekiHikari] on Twitter

[example1]: https://github.com/Artprozew/GenshinRichPresence/assets/33605982/1f428371-d880-4783-802d-93f9526af002
[example2]: https://github.com/Artprozew/GenshinRichPresence/assets/33605982/1a78f6af-5cda-48e2-849a-da2f7b75c113

[releases]: https://github.com/Artprozew/GenshinRichPresence/releases

[GIMI]: https://github.com/SilentNightSound/GI-Model-Importer
[Region.ini]: https://github.com/leotorrez/LeoTools/blob/main/releases/Region.ini
[Python]: https://www.python.org/downloads/release/python-3123
[Poetry]: https://python-poetry.org/docs/#installing-with-the-official-installer

[golanah921]: https://gamebanana.com/tools/15459
[KisekiHikari]: https://x.com/KisekiHikari

[LICENSE]: https://github.com/Artprozew/GenshinRichPresence/blob/master/LICENSE
